# ğŸš€ Po-Todo-List æœåŠ¡å™¨éƒ¨ç½²è¯´æ˜

æœ¬é¡¹ç›®æä¾›äº†å¤šç§éƒ¨ç½²æ–¹å¼ï¼Œæ‚¨å¯ä»¥æ ¹æ®å®é™…æƒ…å†µé€‰æ‹©æœ€é€‚åˆçš„éƒ¨ç½²æ–¹æ¡ˆã€‚

## ğŸ“¦ éƒ¨ç½²æ–‡ä»¶è¯´æ˜

| æ–‡ä»¶å | ç”¨é€” | è¯´æ˜ |
|--------|------|------|
| `Dockerfile` | Dockeré•œåƒæ„å»º | å·²ä¼˜åŒ–çš„ç”Ÿäº§ç¯å¢ƒé•œåƒé…ç½® |
| `docker-compose.yml` | å®¹å™¨ç¼–æ’ | åŒ…å«æ•°æ®æŒä¹…åŒ–å’Œå¥åº·æ£€æŸ¥ |
| `deploy.sh` | éƒ¨ç½²ç®¡ç†è„šæœ¬ | ç”¨äºå·²æœ‰Dockerç¯å¢ƒçš„æœåŠ¡å™¨ |
| `quick-deploy.sh` | ä¸€é”®éƒ¨ç½²è„šæœ¬ | é€‚ç”¨äºå…¨æ–°æœåŠ¡å™¨ï¼Œè‡ªåŠ¨å®‰è£…ä¾èµ– |
| `init-db.sh` | æ•°æ®åº“åˆå§‹åŒ–è„šæœ¬ | è‡ªåŠ¨åˆ›å»ºæ•°æ®åº“è¡¨å’Œåˆå§‹æ•°æ® |
| `.env.production` | ç”Ÿäº§ç¯å¢ƒé…ç½® | ç¯å¢ƒå˜é‡æ¨¡æ¿ |
| `nginx.conf` | Nginxé…ç½® | åå‘ä»£ç†é…ç½®æ¨¡æ¿ |
| `DEPLOYMENT.md` | è¯¦ç»†éƒ¨ç½²æ–‡æ¡£ | å®Œæ•´çš„éƒ¨ç½²æŒ‡å—å’Œæ•…éšœæ’é™¤ |

## ğŸ¯ å¿«é€Ÿéƒ¨ç½²ï¼ˆæ¨èï¼‰

### æ–¹æ¡ˆä¸€ï¼šå…¨æ–°æœåŠ¡å™¨ä¸€é”®éƒ¨ç½²

é€‚ç”¨äºï¼šå…¨æ–°çš„ Linux æœåŠ¡å™¨ï¼Œæœªå®‰è£… Docker

```bash
# 1. ä¸Šä¼ é¡¹ç›®åˆ°æœåŠ¡å™¨
scp -r po-todo-list/ user@your-server:/opt/

# 2. ç™»å½•æœåŠ¡å™¨å¹¶æ‰§è¡Œä¸€é”®éƒ¨ç½²
ssh user@your-server
cd /opt/po-todo-list
sudo ./quick-deploy.sh
```

### æ–¹æ¡ˆäºŒï¼šå·²æœ‰Dockerç¯å¢ƒéƒ¨ç½²

é€‚ç”¨äºï¼šå·²å®‰è£… Docker å’Œ Docker Compose çš„æœåŠ¡å™¨

```bash
# 1. ä¸Šä¼ é¡¹ç›®åˆ°æœåŠ¡å™¨
scp -r po-todo-list/ user@your-server:/opt/

# 2. ç™»å½•æœåŠ¡å™¨å¹¶éƒ¨ç½²
ssh user@your-server
cd /opt/po-todo-list

# 3. æ„å»ºå¹¶å¯åŠ¨
./deploy.sh build
./deploy.sh start
```

### æ–¹æ¡ˆä¸‰ï¼šæ‰‹åŠ¨Dockeréƒ¨ç½²

é€‚ç”¨äºï¼šéœ€è¦è‡ªå®šä¹‰é…ç½®çš„åœºæ™¯

```bash
# 1. æ„å»ºé•œåƒ
docker-compose build

# 2. å¯åŠ¨æœåŠ¡
docker-compose up -d

# 3. æŸ¥çœ‹çŠ¶æ€
docker-compose ps
docker-compose logs
```

## ğŸ’¾ æ•°æ®æŒä¹…åŒ–è¯´æ˜

### SQLiteæ•°æ®åº“æŒ‚è½½
**é‡è¦ï¼š** ä¸ºç¡®ä¿å®¹å™¨é‡å¯åæ•°æ®ä¸ä¸¢å¤±ï¼Œé¡¹ç›®å·²æ­£ç¡®é…ç½®æ•°æ®æŒä¹…åŒ–ï¼š

1. **æœ¬åœ°æ•°æ®ç›®å½•**ï¼š`./data` 
2. **å®¹å™¨å†…è·¯å¾„**ï¼š`/app/data`
3. **æ•°æ®åº“æ–‡ä»¶**ï¼š`potodo.db`
4. **å®Œæ•´è·¯å¾„**ï¼š`./data/potodo.db` â†’ `/app/data/potodo.db`

### æ•°æ®æŒä¹…åŒ–é…ç½®
```yaml
# docker-compose.yml ä¸­çš„å·æŒ‚è½½
volumes:
  - ./data:/app/data  # SQLiteæ•°æ®åº“æ–‡ä»¶æŒä¹…åŒ–
  - ./logs:/app/logs  # æ—¥å¿—æ–‡ä»¶æŒä¹…åŒ–

# ç¯å¢ƒå˜é‡ç¡®ä¿æ•°æ®åº“è·¯å¾„æ­£ç¡®
environment:
  - SPRING_DATASOURCE_URL=jdbc:sqlite:/app/data/potodo.db
```

### æ•°æ®åº“åˆå§‹åŒ–
```bash
# è¿è¡Œæ•°æ®åº“åˆå§‹åŒ–è„šæœ¬
./init-db.sh
```

### æ•°æ®æŒä¹…åŒ–éªŒè¯
```bash
# éªŒè¯æ•°æ®æ˜¯å¦æ­£ç¡®æŒ‚è½½å’ŒæŒä¹…åŒ–
./verify-data.sh
```

**éªŒè¯è¦ç‚¹ï¼š**
- âœ… æœ¬åœ° `./data` ç›®å½•å­˜åœ¨
- âœ… æ•°æ®åº“æ–‡ä»¶ `./data/potodo.db` æ­£ç¡®åˆ›å»º
- âœ… å®¹å™¨å†… `/app/data` ç›®å½•æ­£ç¡®æŒ‚è½½
- âœ… ç¯å¢ƒå˜é‡ `SPRING_DATASOURCE_URL` é…ç½®æ­£ç¡®
- âœ… åº”ç”¨å¯ä»¥æ­£å¸¸è®¿é—®æ•°æ®åº“

## âš™ï¸ ç”Ÿäº§ç¯å¢ƒé…ç½®

### 1. ç¯å¢ƒå˜é‡é…ç½®

```bash
# å¤åˆ¶å¹¶ç¼–è¾‘ç¯å¢ƒé…ç½®
cp .env.production .env
vim .env
```

### 2. Nginx åå‘ä»£ç†ï¼ˆæ¨èï¼‰

```bash
# å®‰è£… Nginx
sudo apt install nginx  # Ubuntu/Debian
sudo yum install nginx  # CentOS/RHEL

# é…ç½® Nginx
sudo cp nginx.conf /etc/nginx/sites-available/po-todo-list
sudo ln -s /etc/nginx/sites-available/po-todo-list /etc/nginx/sites-enabled/

# ç¼–è¾‘é…ç½®æ–‡ä»¶ï¼Œæ›¿æ¢åŸŸå
sudo vim /etc/nginx/sites-available/po-todo-list

# é‡å¯ Nginx
sudo systemctl restart nginx
```

### 3. é˜²ç«å¢™é…ç½®

```bash
# Ubuntu/Debian
sudo ufw allow 80
sudo ufw allow 443
sudo ufw allow 8081

# CentOS/RHEL
sudo firewall-cmd --permanent --add-port=80/tcp
sudo firewall-cmd --permanent --add-port=443/tcp
sudo firewall-cmd --permanent --add-port=8081/tcp
sudo firewall-cmd --reload
```

## ğŸ”§ å¸¸ç”¨ç®¡ç†å‘½ä»¤

```bash
# æŸ¥çœ‹æœåŠ¡çŠ¶æ€
./deploy.sh logs

# é‡å¯æœåŠ¡
./deploy.sh restart

# åœæ­¢æœåŠ¡
./deploy.sh stop

# æ›´æ–°åº”ç”¨
git pull
./deploy.sh restart

# å¤‡ä»½æ•°æ®
cp data/potodo.db backup/potodo_$(date +%Y%m%d_%H%M%S).db
```

## ğŸŒ è®¿é—®åº”ç”¨

éƒ¨ç½²æˆåŠŸåï¼Œæ‚¨å¯ä»¥é€šè¿‡ä»¥ä¸‹åœ°å€è®¿é—®ï¼š

- **åº”ç”¨é¦–é¡µ**: `http://your-server-ip:8081`
- **ç™»å½•é¡µé¢**: `http://your-server-ip:8081/login.html`
- **ä»»åŠ¡ç®¡ç†**: `http://your-server-ip:8081/todo.html`
- **æ•°æ®åˆ†æ**: `http://your-server-ip:8081/analytics.html`

## ğŸ†˜ æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

1. **ç«¯å£è¢«å ç”¨**
   ```bash
   sudo netstat -tlnp | grep :8081
   # ä¿®æ”¹ .env æ–‡ä»¶ä¸­çš„ç«¯å£é…ç½®
   ```

2. **å®¹å™¨å¯åŠ¨å¤±è´¥**
   ```bash
   docker-compose logs po-todo-list
   docker stats
   ```

3. **æƒé™é—®é¢˜**
   ```bash
   sudo chown -R $USER:$USER /opt/po-todo-list
   chmod +x deploy.sh quick-deploy.sh
   ```

### è·å–å¸®åŠ©

- æŸ¥çœ‹è¯¦ç»†æ–‡æ¡£ï¼š`cat DEPLOYMENT.md`
- æŸ¥çœ‹éƒ¨ç½²è„šæœ¬å¸®åŠ©ï¼š`./deploy.sh help`
- æ£€æŸ¥ç³»ç»Ÿèµ„æºï¼š`docker stats`
- æŸ¥çœ‹ç³»ç»Ÿæ—¥å¿—ï¼š`journalctl -u docker`

## ğŸ“‹ ç³»ç»Ÿè¦æ±‚

- **æ“ä½œç³»ç»Ÿ**: Linux (Ubuntu 20.04+, CentOS 7+)
- **å†…å­˜**: æœ€å°‘ 1GB RAM
- **å­˜å‚¨**: æœ€å°‘ 2GB å¯ç”¨ç©ºé—´
- **ç½‘ç»œ**: å¼€æ”¾ç«¯å£ 8081 (æˆ–è‡ªå®šä¹‰ç«¯å£)

## ğŸ”’ å®‰å…¨å»ºè®®

1. å®šæœŸæ›´æ–°ç³»ç»Ÿå’Œ Docker
2. é…ç½® SSL è¯ä¹¦ï¼ˆHTTPSï¼‰
3. è®¾ç½®é˜²ç«å¢™è§„åˆ™
4. å®šæœŸå¤‡ä»½æ•°æ®
5. ç›‘æ§ç³»ç»Ÿèµ„æºä½¿ç”¨æƒ…å†µ

---

**éœ€è¦æ›´å¤šå¸®åŠ©ï¼Ÿ** è¯·æŸ¥çœ‹ `DEPLOYMENT.md` è·å–è¯¦ç»†çš„éƒ¨ç½²æŒ‡å—å’Œæ•…éšœæ’é™¤æ–¹æ¡ˆã€‚